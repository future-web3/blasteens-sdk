"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@reduxjs/toolkit"),t=require("react"),r=require("react-redux");function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=a(t);function o(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function n(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,o(a.key),a)}}var s={tickets:[],showTicketWindow:!1,games:{escapeFromGerms:{numberOfLives:0},tommyJumping:{numberOfLives:0},snowmanDefender:{numberOfLives:0},emojiMatch:{numberOfLives:0}}},c=e.createSlice({name:"tickets",initialState:s,reducers:{setTickets:function(e,t){e.tickets=t.payload},setNumberOfLives:function(e,t){var r=t.payload,a=r.gameName,i=r.numberOfLives;e.games[a].numberOfLives=i},useLives:function(e,t){var r=t.payload;e.games[r].numberOfLives>0&&(e.games[r].numberOfLives-=1)},setShowTicketWindow:function(e,t){e.showTicketWindow=t.payload}}}),u=c.reducer,m=c.actions,l={escapeFromGerms:{score:0,allowSync:!1},tommyJumping:{score:0,allowSync:!1},snowmanDefender:{score:0,allowSync:!1},emojiMatch:{score:0,allowSync:!1}},f=e.createSlice({name:"leaderboards",initialState:l,reducers:{updateGameScore:function(e,t){var r=t.payload,a=r.gameName,i=r.score;e[a].score=i},toggleSyncPermission:function(e,t){var r=t.payload,a=r.gameName,i=r.allowSync;e[a].allowSync=i}}}),d=f.reducer,g=f.actions,v=e.configureStore({reducer:{gameTicket:u,gameLeaderboard:d}}),p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=v,this.gameName=t}var t,r,a;return t=e,(r=[{key:"useLives",value:function(){this.store.dispatch(m.useLives(this.gameName))}},{key:"startGame",value:function(e){this.store.getState().gameTicket.games[this.gameName].numberOfLives>0?e():this.store.dispatch(m.setShowTicketWindow(!0))}},{key:"endGame",value:function(e){0===this.store.getState().gameTicket.games[this.gameName].numberOfLives&&(this.store.dispatch(g.toggleSyncPermission({gameName:this.gameName,allowSync:!0})),e())}},{key:"updateHighScore",value:function(e){this.store.dispatch(g.updateGameScore({gameName:this.gameName,score:e}))}},{key:"getLives",value:function(){return this.store.getState().gameTicket.games[this.gameName].numberOfLives}}])&&n(t.prototype,r),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();exports.GameProvider=function(e){var t=e.children;return i.default.createElement(r.Provider,{store:v},t)},exports.createGameSDK=function(e){return new p(e)},exports.gameLeaderboardActions=g,exports.gameTicketActions=m,exports.store=v,exports.useGameDispatch=function(){return r.useDispatch()},exports.useGameSelector=function(e){return r.useSelector(e)};
