import{createSlice as e,configureStore as t}from"@reduxjs/toolkit";import r from"react";import{Provider as a,useDispatch as i,useSelector as n}from"react-redux";function o(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function s(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,o(a.key),a)}}var m=e({name:"tickets",initialState:{tickets:[],showTicketWindow:!1,games:{escapeFromGerms:{numberOfLives:0},tommyJumping:{numberOfLives:0},snowmanDefender:{numberOfLives:0},emojiMatch:{numberOfLives:0}}},reducers:{setTickets:function(e,t){e.tickets=t.payload},setNumberOfLives:function(e,t){var r=t.payload,a=r.gameName,i=r.numberOfLives;e.games[a].numberOfLives=i},useLives:function(e,t){var r=t.payload;e.games[r].numberOfLives>0&&(e.games[r].numberOfLives-=1)},setShowTicketWindow:function(e,t){e.showTicketWindow=t.payload}}}),c=m.reducer,u=m.actions,f=e({name:"leaderboards",initialState:{escapeFromGerms:{score:0,allowSync:!1},tommyJumping:{score:0,allowSync:!1},snowmanDefender:{score:0,allowSync:!1},emojiMatch:{score:0,allowSync:!1}},reducers:{updateGameScore:function(e,t){var r=t.payload,a=r.gameName,i=r.score;e[a].score=i},toggleSyncPermission:function(e,t){var r=t.payload,a=r.gameName,i=r.allowSync;e[a].allowSync=i}}}),l=f.reducer,g=f.actions,v=t({reducer:{gameTicket:c,gameLeaderboard:l}}),d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=v,this.gameName=t}var t,r,a;return t=e,(r=[{key:"useLives",value:function(){this.store.dispatch(u.useLives(this.gameName))}},{key:"startGame",value:function(e){this.store.getState().gameTicket.games[this.gameName].numberOfLives>0?e():this.store.dispatch(u.setShowTicketWindow(!0))}},{key:"endGame",value:function(e){0===this.store.getState().gameTicket.games[this.gameName].numberOfLives&&(this.store.dispatch(g.toggleSyncPermission({gameName:this.gameName,allowSync:!0})),e())}},{key:"updateHighScore",value:function(e){this.store.dispatch(g.updateGameScore({gameName:this.gameName,score:e}))}},{key:"getLives",value:function(){return this.store.getState().gameTicket.games[this.gameName].numberOfLives}}])&&s(t.prototype,r),a&&s(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),y=function(e){var t=e.children;return r.createElement(a,{store:v},t)},p=function(){return i()},h=function(e){return n(e)};function b(e){return new d(e)}export{y as GameProvider,b as createGameSDK,g as gameLeaderboardActions,u as gameTicketActions,v as store,p as useGameDispatch,h as useGameSelector};
