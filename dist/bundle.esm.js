import{createSlice as e,configureStore as t}from"@reduxjs/toolkit";import a from"react";import{Provider as r,useDispatch as i,useSelector as n}from"react-redux";function o(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}var m=e({name:"tickets",initialState:{tickets:[],showTicketWindow:!1,games:{escapeFromGerms:{numberOfLives:0},tommyJumping:{numberOfLives:0},snowmanDefender:{numberOfLives:0},emojiMatch:{numberOfLives:0}}},reducers:{setTickets:function(e,t){e.tickets=t.payload},setNumberOfLives:function(e,t){var a=t.payload,r=a.gameName,i=a.numberOfLives;e.games[r].numberOfLives=i},addGame:function(e,t){e.games[t.payload]={numberOfLives:0}},useLives:function(e,t){var a=t.payload;e.games[a].numberOfLives>0&&(e.games[a].numberOfLives-=1)},setShowTicketWindow:function(e,t){e.showTicketWindow=t.payload}}}),c=m.reducer,u=m.actions,f=e({name:"leaderboards",initialState:{escapeFromGerms:{score:0,allowSync:!1},tommyJumping:{score:0,allowSync:!1},snowmanDefender:{score:0,allowSync:!1},emojiMatch:{score:0,allowSync:!1}},reducers:{updateGameScore:function(e,t){var a=t.payload,r=a.gameName,i=a.score;e[r].score=i},toggleSyncPermission:function(e,t){var a=t.payload,r=a.gameName,i=a.allowSync;e[r].allowSync=i},addGame:function(e,t){e[t.payload]={score:0,allowSync:!1}}}}),l=f.reducer,d=f.actions,g=t({reducer:{gameTicket:c,gameLeaderboard:l},devTools:!1}),v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=g,this.gameName=t}var t,a,r;return t=e,(a=[{key:"useLives",value:function(){this.store.dispatch(u.useLives(this.gameName))}},{key:"startGame",value:function(e){this.store.getState().gameTicket.games[this.gameName].numberOfLives>0?e():this.store.dispatch(u.setShowTicketWindow(!0))}},{key:"endGame",value:function(e){0===this.store.getState().gameTicket.games[this.gameName].numberOfLives&&(this.store.dispatch(d.toggleSyncPermission({gameName:this.gameName,allowSync:!0})),e())}},{key:"updateHighScore",value:function(e){this.store.dispatch(d.updateGameScore({gameName:this.gameName,score:e}))}},{key:"getLives",value:function(){return this.store.getState().gameTicket.games[this.gameName].numberOfLives}}])&&s(t.prototype,a),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),y=function(e){var t=e.children;return a.createElement(r,{store:g},t)},p=function(){return i()},h=function(e){return n(e)};function b(e){return new v(e)}export{y as GameProvider,b as createGameSDK,d as gameLeaderboardActions,u as gameTicketActions,g as store,p as useGameDispatch,h as useGameSelector};
